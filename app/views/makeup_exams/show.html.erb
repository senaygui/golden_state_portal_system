<div class="container mt-4">
  <% if @makeup_exam.department_approval == 'approved' && @makeup_exam.add_mark.nil? %>
        <div class="alert alert-success d-flex align-items-center mb-4" role="alert">
          <div>
            Department has approved your makeup exam request.
            <% if @makeup_exam.other_payment.present? && @makeup_exam.other_payment.invoice_status == 'unpaid' %>
              You can proceed to payment: <%= link_to 'Pay Now', other_payment_path(@makeup_exam.other_payment), class: 'alert-link' %>.
            <% end %>
          </div>
        </div>
      <% end %>
  <div class="card">
    <div class="card-header bg-primary text-white">
      <h4 class="mb-0">Makeup Exam Request Details</h4>
    </div>
    <div class="card-body">
      
      <div class="row">
        <div class="col-md-6">
          <h5 class="text-muted mb-3">Student & Course Information</h5>
          <div class="mb-2"><strong>Student Name:</strong> <%= @makeup_exam.student.name.full if @makeup_exam.student %></div>
          <div class="mb-2"><strong>Student ID:</strong> <%= @makeup_exam.student.student_id if @makeup_exam.student %></div>
          <div class="mb-2"><strong>Course:</strong> <%= @makeup_exam.course&.course_title %></div>
          <div class="mb-2"><strong>Program:</strong> <%= @makeup_exam.program&.program_name %></div>
          <div class="mb-2"><strong>Department:</strong> <%= @makeup_exam.department&.department_name %></div>
          <div class="mb-2"><strong>Academic Year:</strong> <%= @makeup_exam.year %></div>
          <div class="mb-2"><strong>Semester:</strong> <%= @makeup_exam.semester %></div>
        </div>
        <div class="col-md-6">
          <h5 class="text-muted mb-3">Grade & Request Information</h5>
          <div class="mb-2"><strong>Previous Total:</strong> <%= @makeup_exam.previous_result_total %></div>
          <div class="mb-2"><strong>Previous Letter Grade:</strong> <%= @makeup_exam.previous_letter_grade %></div>
          <div class="mb-2"><strong>Makeup Exam Result:</strong> <%= @makeup_exam.add_mark %></div>
          <div class="mb-2"><strong>Current Letter Grade:</strong> <%= @makeup_exam.current_letter_grade %></div>
          <div class="mb-2"><strong>Total Assessments:</strong> <%= @makeup_exam.student_grade&.assesment_total %></div>
          <div class="mb-2"><strong>Reason:</strong> <%= @makeup_exam.reason %></div>
          <div class="mb-2"><strong>Status:</strong> 
            <% if @makeup_exam.status == 'approved' %>
              <span class="badge bg-success">Approved</span>
            <% elsif @makeup_exam.status == 'denied' %>
              <span class="badge bg-danger">Denied</span>
            <% else %>
              <span class="badge bg-warning">Pending</span>
            <% end %>
          </div>
          <div class="mb-2"><strong>Created At:</strong> <%= @makeup_exam.created_at.strftime("%B %d, %Y") %></div>
          <% if @makeup_exam.department_approval == 'approved' %>
            <div class="mb-2">
              <strong>Department Approval:</strong>
              <span class="badge bg-success">Approved</span>
            </div>
            <div class="mb-2">
              <% if @makeup_exam.other_payment.present? && @makeup_exam.other_payment.invoice_status == 'unpaid' %>
                <%= link_to 'Pay Now And Attend The Exam', other_payment_path(@makeup_exam.other_payment), class: 'btn btn-danger btn-sm' %>
              <% else %>
                <%= link_to 'Go to Payments', other_payments_path, class: 'btn btn-secondary btn-sm' %>
              <% end %>
            </div>
          <% end %>
          
        </div>
      </div>
      <div class="row mt-4">
        <div class="col-12">
          <%= link_to 'Back', makeup_exams_path, class: 'btn btn-secondary' %>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .card {
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    border: none;
    border-radius: 0.5rem;
  }
  .card-header {
    border-radius: 0.5rem 0.5rem 0 0 !important;
  }
  .badge {
    font-size: 0.875rem;
    padding: 0.35em 0.65em;
  }
  .btn {
    padding: 0.5rem 1.5rem;
    font-weight: 500;
  }
</style> 